"use strict";(self.webpackChunkfront_documentation=self.webpackChunkfront_documentation||[]).push([[308],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},s="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),s=u(a),h=r,m=s["".concat(l,".").concat(h)]||s[h]||d[h]||o;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=h;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[s]="string"==typeof e?e:r,i[1]=p;for(var u=2;u<o;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},3807:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>s,frontMatter:()=>o,metadata:()=>p,toc:()=>u});var n=a(11),r=(a(7294),a(3905));const o={sidebar_position:4},i="Update a contract",p={unversionedId:"guides/update",id:"guides/update",title:"Update a contract",description:"Changes in trip details happen, even more often than we would like, but what should you do if it happens? We are here to",source:"@site/resources/partner-api/guides/update.md",sourceDirName:"guides",slug:"/guides/update",permalink:"/partner-api/guides/update",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"sidebar",previous:{title:"Retrieve products' Terms & Conditions",permalink:"/partner-api/guides/retrieve-t&c"},next:{title:"Declare a booking cancellation",permalink:"/partner-api/guides/contracts"}},l={},u=[{value:"When should you update a contract?",id:"when-should-you-update-a-contract",level:2},{value:"What data can you update?",id:"what-data-can-you-update",level:2},{value:"Could it have an impact on Koala product price?",id:"could-it-have-an-impact-on-koala-product-price",level:2},{value:"How can you update a trip? (Regular update)",id:"how-can-you-update-a-trip-regular-update",level:2},{value:"Possible outputs",id:"possible-outputs",level:2},{value:"How can I update a trip after it already started (Partial update)",id:"how-can-i-update-a-trip-after-it-already-started-partial-update",level:2}],c={toc:u};function s(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"update-a-contract"},"Update a contract"),(0,r.kt)("p",null,"Changes in trip details happen, even more often than we would like, but what should you do if it happens? We are here to\ntalk about it!"),(0,r.kt)("h2",{id:"when-should-you-update-a-contract"},"When should you update a contract?"),(0,r.kt)("p",null,"Usually, you will need to update a contract in case of:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Changes made by the customers on their booking\nbefore (",(0,r.kt)("a",{parentName:"li",href:"#how-can-you-update-a-trip-regular-update"},"regular update"),") or after their departure\ndate (",(0,r.kt)("a",{parentName:"li",href:"#how-can-i-update-a-trip-after-it-already-started-partial-update"},"partial update"),"):\nchange in departure date, the addition of a service after the booking,\netc."),(0,r.kt)("li",{parentName:"ul"},"Unavailability of the tickets that you have sold to the customers"),(0,r.kt)("li",{parentName:"ul"},"Changes made by the carrier before departure (change in flight date, flight number, etc.)")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("strong",null,"We will only accept updates if the contract is still valid")," (= the customers can still make a claim for the contract). If you update an invalid contract, you will receive a `401` error and the update will not be considered."),(0,r.kt)("h2",{id:"what-data-can-you-update"},"What data can you update?"),(0,r.kt)("strong",null," Except the booking number"),", you can update all the elements of a contract.",(0,r.kt)("p",null,"Among other things, you can update for a contract:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"the number of travelers and their info"),(0,r.kt)("li",{parentName:"ul"},"the trip price"),(0,r.kt)("li",{parentName:"ul"},"the ",(0,r.kt)("inlineCode",{parentName:"li"},"Journeys")," details"),(0,r.kt)("li",{parentName:"ul"},"the ",(0,r.kt)("inlineCode",{parentName:"li"},"Stays")," details")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If the change suffered has also caused the modification of the booking number used for the contract, please contact us\nby email at ",(0,r.kt)("a",{parentName:"p",href:"mailto:contact@hikoala.co"},"contact@hikoala.co")," with all the details.")),(0,r.kt)("h2",{id:"could-it-have-an-impact-on-koala-product-price"},"Could it have an impact on Koala product price?"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Yes, sometimes it can!")," For instance, if the cost of the product is a % of the booking price and your traveller\ndecides to add an option that increases the booking price, the product price will increase by the corresponding %."),(0,r.kt)("p",null,"But do not worry, we got your back by informing you via ",(0,r.kt)("inlineCode",{parentName:"p"},"priceDelta")," in the response of the Quote. This object informs\nyou the delta between with the new price and the previous price of the subscription before the update. It can be\npositive or negative."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"You will be responsible for charging or reimbursing the customer this delta "),".")),(0,r.kt)("h2",{id:"how-can-you-update-a-trip-regular-update"},"How can you update a trip? (Regular update)"),(0,r.kt)("p",null,"Updating trip details is a 2-steps process:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 1:")),(0,r.kt)("p",null,"You need first to use our ",(0,r.kt)("a",{parentName:"p",href:"./quotes"},"Quotes")," endpoint with the new contract details. Even if only one field has been\nchanged, you must return the entire ",(0,r.kt)("a",{parentName:"p",href:"./quotes"},"Quote"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X POST "https://staging-partner.api.hikoala.co/quotes" -H "Content-Type: application/JSON" -H "accept: application/JSON" -H "Authorization: Bearer <token>" \n')),(0,r.kt)("p",null,"Please store the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," you received in the response, you will need it for Step 2."),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 2:")),(0,r.kt)("p",null,"Once you have completed Step 1, you will need to add the customer and traveler information (",(0,r.kt)("strong",null,"even if it has not\nchanged"),") and ",(0,r.kt)("strong",{parentName:"p"},"Patch")," the ",(0,r.kt)("a",{parentName:"p",href:"./quotes"},"Quote")," you have just made on:\n",(0,r.kt)("em",{parentName:"p"},"(please replace the ",(0,r.kt)("inlineCode",{parentName:"em"},"bookingNumber")," with the booking number of the contract that is being changed)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X PATCH "https://staging-partner.api.hikoala.co/subscriptions/{bookingNumber}" -H "Content-Type: application/JSON" -H "accept: application/JSON" -H "Authorization: Bearer <token>" --data-raw \'{"data": {}}\'\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,"If you followed the two steps, you will receive a ",(0,r.kt)("inlineCode",{parentName:"p"},"201")," response, meaning that the trip's details are now up to date and\nthat we have adapted accordingly our operations \ud83d\udcaa"),(0,r.kt)("h2",{id:"possible-outputs"},"Possible outputs"),(0,r.kt)("p",null,"Our API can send you back the following responses:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"200"),": The Subscription has successfully been updated \ud83e\udd29"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"400"),": Something went wrong with the update. You may have forgotten one mandatory field or made a mistake with one\nformat."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"401"),": The Update cannot be made because you are experimenting with an issue with your token."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"404"),": There is no contract associated with the ",(0,r.kt)("inlineCode",{parentName:"li"},"bookingNumber")," that you have provided.")),(0,r.kt)("h2",{id:"how-can-i-update-a-trip-after-it-already-started-partial-update"},"How can I update a trip after it already started (Partial update)"),(0,r.kt)("p",null,"As mentioned above, you can also update contracts even after the trip has started! This mechanism is a bit different\nfrom the regular one."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The partial update of a subscription only applies to some cases:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Contracts must be linked to a product of type FDC (Flight Disruption)"),(0,r.kt)("li",{parentName:"ul"},"You can only provide one partial quote reference to the ",(0,r.kt)("a",{parentName:"li",href:"./subscriptions"},"Subscription")," update endpoint (partial\nupdate is not supported for multi-trips)"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 1:")),(0,r.kt)("p",null,"You need first to use our ",(0,r.kt)("a",{parentName:"p",href:"./quotes"},"Quotes")," endpoint with the new contract details and pass it the ",(0,r.kt)("inlineCode",{parentName:"p"},"isPartial")," query\nparameter, set to true."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X POST "https://staging-partner.api.hikoala.co/quotes?isPartial=true" -H "Content-Type: application/JSON" -H "accept: application/JSON" -H "Authorization: Bearer <token>" \n')),(0,r.kt)("p",null,"Please store the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," you received in the response, you will need it for Step 2."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Our API will only calculate prices for new flights compared to original subscription.")),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"The ",(0,r.kt)("inlineCode",{parentName:"strong"},"contracts")," object")),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"./quotes"},"Quote")," endpoint response will contain a new object: ",(0,r.kt)("inlineCode",{parentName:"p"},"contracts"),".\nThis object is ",(0,r.kt)("strong",{parentName:"p"},"informative")," and lets you know which contracts are different (",(0,r.kt)("inlineCode",{parentName:"p"},"new"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"obsolete"),",\nor ",(0,r.kt)("inlineCode",{parentName:"p"},"unchanged"),") from the original subscription trip,\nas well as which parts were not able to be quoted (",(0,r.kt)("inlineCode",{parentName:"p"},"notCovered"),").\nYou may want to use it to signal your customers which parts of their new trip can be covered by Koala or not."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),": we had flight disruption contracts for a round trip\nfrom Paris (leaving on 9/28/2022) to New-York (returning on 10/2/2022), and we want to change the return journey by\nadding a flight from New-York to Los-Angeles (on 10/1/2022) and then come back to Paris (on 10/2/2022) .\nIf we quote on the 9/30/2022, the ",(0,r.kt)("inlineCode",{parentName:"p"},"contracts")," object will look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-JSON"},'{\n  "new": [\n    {\n      "id": "26392653-2bc8-4c56-8dd5-3a470dfea606",\n      "coveredEvent": {\n        "airlineIata": "AF",\n        "number": 1640,\n        "departureAirportIata": "LAX",\n        "departureDate": "2022-10-10T14:00:00.000Z",\n        "arrivalAirportIata": "CDG",\n        "arrivalDate": "2022-10-10T19:00:00.000Z"\n      },\n      "price": {\n        "amount": 12.5,\n        "currency": "EUR"\n      }\n    }\n  ],\n  "notCovered": [\n    {\n      "coveredEvent": {\n        "airlineIata": "AF",\n        "number": 1641,\n        "departureAirportIata": "JFK",\n        "departureDate": "2022-10-01T14:00:00.000Z",\n        "arrivalAirportIata": "LAX",\n        "arrivalDate": "2022-10-01T19:00:00.000Z"\n      },\n      "reasons": [\n        "Product cannot be subscribed less than 2 days before the trip start date, the trip start in 3 hours."\n      ]\n    }\n  ],\n  "obsolete": [\n    {\n      "id": "837a151f-1ce7-4b9c-acab-582997f4f70e",\n      "coveredEvent": {\n        "airlineIata": "AF",\n        "number": 1640,\n        "departureAirportIata": "JFK",\n        "departureDate": "2022-10-02T14:00:00.000Z",\n        "arrivalAirportIata": "CDG",\n        "arrivalDate": "2022-10-02T19:00:00.000Z"\n      },\n      "price": {\n        "amount": 14.5,\n        "currency": "EUR"\n      }\n    }\n  ],\n  "unchanged": [\n    {\n      "id": "5a72eee3-76d0-4b8f-8830-63db20476cd1",\n      "coveredEvent": {\n        "airlineIata": "AF",\n        "number": 343,\n        "departureAirportIata": "CDG",\n        "departureDate": "2022-09-28T14:00:00.000Z",\n        "arrivalAirportIata": "JFK",\n        "arrivalDate": "2022-09-28T19:00:00.000Z"\n      },\n      "price": {\n        "amount": 10,\n        "currency": "EUR"\n      }\n    }\n  ]\n}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 2:")),(0,r.kt)("p",null,"Once you have completed Step 1, you will need to add the customer and traveler information (",(0,r.kt)("strong",null,"even if it has not\nchanged"),") and ",(0,r.kt)("strong",{parentName:"p"},"Patch")," the ",(0,r.kt)("a",{parentName:"p",href:"./subscriptions"},"Subscription")," you have just made on:\n",(0,r.kt)("em",{parentName:"p"},"(please replace the ",(0,r.kt)("inlineCode",{parentName:"em"},"bookingNumber")," with the booking number of the contract that is being changed)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X PATCH "https://staging-partner.api.hikoala.co/subscriptions/{bookingNumber}" -H "Content-Type: application/JSON" -H "accept: application/JSON" -H "Authorization: Bearer <token>" --data-raw \'{"data": {}}\'\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,"If you followed the two steps, you will receive a ",(0,r.kt)("inlineCode",{parentName:"p"},"201")," response, meaning that the trip's details are now up to date and\nthat we have adapted accordingly our operations \ud83d\udcaa"))}s.isMDXComponent=!0}}]);