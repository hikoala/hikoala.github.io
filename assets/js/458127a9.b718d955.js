(self.webpackChunkfront_documentation=self.webpackChunkfront_documentation||[]).push([[502],{9530:function(e,n,t){"use strict";t.d(n,{Zo:function(){return d},kt:function(){return m}});var r=t(2735);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),s=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=s(e.components);return r.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,d=u(e,["components","mdxType","originalType","parentName"]),c=s(t),m=a,f=c["".concat(l,".").concat(m)]||c[m]||p[m]||o;return t?r.createElement(f,i(i({ref:n},d),{},{components:t})):r.createElement(f,i({ref:n},d))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=c;var u={};for(var l in n)hasOwnProperty.call(n,l)&&(u[l]=n[l]);u.originalType=e,u.mdxType="string"==typeof e?e:a,i[1]=u;for(var s=2;s<o;s++)i[s]=t[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},989:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return u},metadata:function(){return l},toc:function(){return s},default:function(){return p}});var r=t(5851),a=t(8518),o=(t(2735),t(9530)),i=["components"],u={sidebar_position:1},l={unversionedId:"guides/quotes",id:"guides/quotes",isDocsHomePage:!1,title:"Quotes",description:"Now that we have covered the basics and what a bundle is, it is time for you to understand how to display a price on your",source:"@site/resources/partner-api/guides/quotes.md",sourceDirName:"guides",slug:"/guides/quotes",permalink:"/partner-api/guides/quotes",version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"sidebar",previous:{title:"Bundles",permalink:"/partner-api/overview/bundles"},next:{title:"Subscriptions",permalink:"/partner-api/guides/subscriptions"}},s=[{value:"How Koala works",id:"how-koala-works",children:[]},{value:"Quote output",id:"quote-output",children:[{value:"Invalid payload",id:"invalid-payload",children:[]},{value:"Valid payload but not fulling some criteria",id:"valid-payload-but-not-fulling-some-criteria",children:[]}]}],d={toc:s};function p(e){var n=e.components,t=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Now that we have covered the basics and what a bundle is, it is time for you to understand how to display a price on your\npurchase funnel."),(0,o.kt)("h2",{id:"how-koala-works"},"How Koala works"),(0,o.kt)("p",null,"As mentioned before, you were assigned bundles. Each time you send us a trip, our quote engine will match every products\nwithin a bundle with the underlying trip elements, aggregate those individual results in a quote. You will then receive a\nquote per bundle."),(0,o.kt)("p",null,"If we take the previous example, if you have bundles ",(0,o.kt)("inlineCode",{parentName:"p"},"bozk")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"flux"),", you will receive:"),(0,o.kt)("p",null,"TODO:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'[\n  {\n    "bundle_id": "bozk",\n    "valid": true,\n    "id": "<uuid>",\n    "quote": "<base64>",\n    "price": {\n      "amount": 13.24,\n      "currency": "EUR"\n    },\n    // ...\n  },\n  {\n    "bundle_id": "flux",\n    "valid": true,\n    "id": "<uuid>",\n    "quote": "<base64>",\n    "price": {\n      "amount": 20.19,\n      "currency": "EUR"\n    },\n    // ...\n  }\n]\n')),(0,o.kt)("h2",{id:"quote-output"},"Quote output"),(0,o.kt)("h3",{id:"invalid-payload"},"Invalid payload"),(0,o.kt)("p",null,"If you do not provide the quote API with a valid payload, you will receive an error 400 (",(0,o.kt)("inlineCode",{parentName:"p"},"Bad Request"),"), stating the\nill-formed field. Please refer to ",(0,o.kt)("a",{parentName:"p",href:"../references/errors"},"the documentation")," for the expected input payload format."),(0,o.kt)("h3",{id:"valid-payload-but-not-fulling-some-criteria"},"Valid payload but not fulling some criteria"),(0,o.kt)("p",null,"Each product, and, by extension, each bundle will come with the set of criteria to ensure we can generate a contract based\non the provided trip. For example, in order to prevent fraud, we may not want to sell Koala's products less than 48\nhours before departure, or chose not to cover journeys containing more than 3 flights."),(0,o.kt)("p",null,"In those cases, you will receive a 200 (",(0,o.kt)("inlineCode",{parentName:"p"},"OK"),") answer from a the server but an invalid quote, meaning we can not apply a\nbundle to the given trip."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If your partnership with Koala involves more than one bundle, one could generate a valid quote and another one an invalid\nquote. You must only display valid quotes in your purchase funnel."))),(0,o.kt)("p",null,"Invalid quotes come with a field ",(0,o.kt)("inlineCode",{parentName:"p"},"reasons")," that will help you understand why we could not cover the given trip."),(0,o.kt)("p",null,"If you take the previous example, you can receive:"),(0,o.kt)("p",null,"TODO:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'[\n  {\n    "bundle_id": "bozk",\n    "valid": false,\n    "id": "<uuid>",\n    "reasons": [\n      "One of the flight is to close in the future (cannot cover flights departing before \'2021-03-15T11:37:00.000+03:00\' and journeys.0.flights.0.departure_date is \'2020-03-12T14:43:00.000+03:00\')"\n    ]\n  },\n  {\n    "bundle_id": "flux",\n    "valid": true,\n    "price": {\n      "amount": 20.19,\n      "currency": "EUR"\n    },\n    "id": "<uuid>",\n    "quote": "<base64>"\n    // ...\n  }\n]\n')))}p.isMDXComponent=!0}}]);