"use strict";(self.webpackChunkfront_documentation=self.webpackChunkfront_documentation||[]).push([[308],{2074:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>s,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var n=a(11),o=(a(2735),a(9530));const r={sidebar_position:4},i="Update a contract",l={unversionedId:"guides/update",id:"guides/update",title:"Update a contract",description:"Changes in trip details happen, even more often than we would like, but what should you do if it happens? We are here to talk about it!",source:"@site/resources/partner-api/guides/update.md",sourceDirName:"guides",slug:"/guides/update",permalink:"/partner-api/guides/update",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"sidebar",previous:{title:"Retrieve products' Terms & Conditions",permalink:"/partner-api/guides/retrieve-t&c"},next:{title:"Declare a booking cancellation",permalink:"/partner-api/guides/contracts"}},p={},u=[{value:"When should you update a contract?",id:"when-should-you-update-a-contract",level:2},{value:"What data can you update?",id:"what-data-can-you-update",level:2},{value:"Could it have an impact on Koala product price?",id:"could-it-have-an-impact-on-koala-product-price",level:2},{value:"How can you update a trip?",id:"how-can-you-update-a-trip",level:2},{value:"Possible outputs",id:"possible-outputs",level:2}],c={toc:u};function s(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"update-a-contract"},"Update a contract"),(0,o.kt)("p",null,"Changes in trip details happen, even more often than we would like, but what should you do if it happens? We are here to talk about it!"),(0,o.kt)("h2",{id:"when-should-you-update-a-contract"},"When should you update a contract?"),(0,o.kt)("p",null,"Usually, you will need to update a contract in case of: "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Changes made by the customers on their booking (change in departure date, the addition of a service after the booking, etc.)"),(0,o.kt)("li",{parentName:"ul"},"Unavailability of the tickets that you have sold to the customers"),(0,o.kt)("li",{parentName:"ul"},"Changes made by the carrier before departure (change in flight date, flight number, etc.)")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("strong",null,"We will only accept updates if the contract is still valid")," (= the customers can still make a claim for the contract). If you update an invalid contract, you will receive a `401` error and the update will not be considered."),(0,o.kt)("h2",{id:"what-data-can-you-update"},"What data can you update?"),(0,o.kt)("strong",null," Except the booking number"),", you can update all the elements of a contract.",(0,o.kt)("p",null,"Among other things, you can update for a contract:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"the number of travelers and their info"),(0,o.kt)("li",{parentName:"ul"},"the trip price"),(0,o.kt)("li",{parentName:"ul"},"the ",(0,o.kt)("inlineCode",{parentName:"li"},"Journeys")," details"),(0,o.kt)("li",{parentName:"ul"},"the ",(0,o.kt)("inlineCode",{parentName:"li"},"Stays")," details")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If the change suffered has also caused the modification of the booking number used for the contract, please contact us by email at ",(0,o.kt)("a",{parentName:"p",href:"mailto:contact@hikoala.co"},"contact@hikoala.co")," with all the details.")),(0,o.kt)("h2",{id:"could-it-have-an-impact-on-koala-product-price"},"Could it have an impact on Koala product price?"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Yes, sometimes it can!")," For instance, if the cost of the product is a % of the booking price and your traveller decides to add an option that increases the booking price, the product price will increase by the corresponding %."),(0,o.kt)("p",null,"But do not worry, we got your back by informing you via ",(0,o.kt)("inlineCode",{parentName:"p"},"priceDelta")," in the response of the Quote. This object informs you the delta between with the new price and the previous price of the subscription before the update. It can be positive or negative."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"You will be responsible for charging or reimbursing the customer this delta "),". ")),(0,o.kt)("h2",{id:"how-can-you-update-a-trip"},"How can you update a trip?"),(0,o.kt)("p",null,"Updating trip details is a 2-steps process: "),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Step 1:")),(0,o.kt)("p",null,"You need first to use our ",(0,o.kt)("a",{parentName:"p",href:"./quotes"},"Quotes")," endpoint with the new contract details. Even if only one field has been changed, you must return the entire ",(0,o.kt)("a",{parentName:"p",href:"./quotes"},"Quote"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'curl -X POST "https://staging-partner.api.hikoala.co/quotes" -H "Content-Type: application/JSON" -H "accept: application/JSON" -H "Authorization: Bearer <token>" \n')),(0,o.kt)("p",null,"Please store the ",(0,o.kt)("inlineCode",{parentName:"p"},"id")," you received in the response, you will need it for Step 2."),(0,o.kt)("br",null),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Step 2:")),(0,o.kt)("p",null,"Once you have completed Step 1, you will need to add the customer and traveler information (",(0,o.kt)("strong",null,"even if it has not changed"),") and ",(0,o.kt)("strong",{parentName:"p"},"Patch")," the ",(0,o.kt)("a",{parentName:"p",href:"./quotes"},"Quote")," you have just made on:\n",(0,o.kt)("em",{parentName:"p"},"(please replace the ",(0,o.kt)("inlineCode",{parentName:"em"},"bookingNumber")," with the booking number of the contract that is being changed)")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'curl -X PATCH "https://staging-partner.api.hikoala.co/subscriptions/{bookingNumber}" -H "Content-Type: application/JSON" -H "accept: application/JSON" -H "Authorization: Bearer <token>" --data-raw \'{"data": {}}\'\n')),(0,o.kt)("br",null),(0,o.kt)("p",null,"If you followed the two steps, you will receive a ",(0,o.kt)("inlineCode",{parentName:"p"},"201")," response, meaning that the trip's details are now up to date and that we have adapted accordingly our operations \ud83d\udcaa"),(0,o.kt)("h2",{id:"possible-outputs"},"Possible outputs"),(0,o.kt)("p",null,"Our API can send you back the following responses:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"200"),": The Subscription has successfully been updated \ud83e\udd29"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"400"),": Something went wrong with the update. You may have forgotten one mandatory field or made a mistake with one format."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"401"),": The Update cannot be made because you are experimenting with an issue with your token."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"404"),": There is no contract associated with the ",(0,o.kt)("inlineCode",{parentName:"li"},"bookingNumber")," that you have provided.")))}s.isMDXComponent=!0},9530:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(2735);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=n.createContext({}),u=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(a),h=o,m=d["".concat(p,".").concat(h)]||d[h]||s[h]||r;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var u=2;u<r;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);