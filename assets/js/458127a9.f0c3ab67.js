"use strict";(self.webpackChunkfront_documentation=self.webpackChunkfront_documentation||[]).push([[502],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,u=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=o,h=d["".concat(u,".").concat(m)]||d[m]||c[m]||r;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},238:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var a=n(7462),o=(n(7294),n(3905));const r={sidebar_position:1},i="Get a price from the API",l={unversionedId:"guides/quotes",id:"guides/quotes",title:"Get a price from the API",description:"Now that you know what a bundle is, it is time for you to understand how to display a price in your purchase funnel.",source:"@site/resources/partner-api/guides/quotes.md",sourceDirName:"guides",slug:"/guides/quotes",permalink:"/partner-api/guides/quotes",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"sidebar",previous:{title:"Journeys vs Stays",permalink:"/partner-api/overview/journeys-stays"},next:{title:"Create a contract",permalink:"/partner-api/guides/subscriptions"}},u={},s=[{value:"What is a Quote?",id:"what-is-a-quote",level:2},{value:"Example of Quote input",id:"example-of-quote-input",level:2},{value:"Possible Quote outputs",id:"possible-quote-outputs",level:2},{value:"Valid payload but inability to sell the bundle",id:"valid-payload-but-inability-to-sell-the-bundle",level:3}],p={toc:s},d="wrapper";function c(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"get-a-price-from-the-api"},"Get a price from the API"),(0,o.kt)("p",null,"Now that you know what a bundle is, it is time for you to understand how to display a price in your purchase funnel."),(0,o.kt)("h2",{id:"what-is-a-quote"},"What is a Quote?"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Quote")," is the endpoint that you will use to obtain the price of Koala products (in the form of bundles now that you\nare an expert!)."),(0,o.kt)("p",null,"Every time that you need to know how much a Koala product costs, you will call the ",(0,o.kt)("inlineCode",{parentName:"p"},"Quote")," API and send us the traveler's\ntrip details. Our Quote engine will then compute the price of all the possible bundles for the given trip details. "),(0,o.kt)("p",null,"You will receive from us one price per bundle."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"For one customer session in your purchase funnel, the ",(0,o.kt)("strong",{parentName:"p"},"Quote API can be called several times")," if the traveler decides to make changes to their\nbooking details (choose a new flight, add or remove a traveler, add options included in the compensation, change dates, etc...). ")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"By default, a Quote will be valid for ",(0,o.kt)("strong",{parentName:"p"},"72 hours")," (if you need us to extend this validity period, please let us know at ",(0,o.kt)("a",{parentName:"p",href:"mailto:support@hikoala.co"},"support@hikoala.co"),").")),(0,o.kt)("h2",{id:"example-of-quote-input"},"Example of Quote input"),(0,o.kt)("p",null,"This is an example of a payload to provide to the Quotes service for a trip containing only a ",(0,o.kt)("inlineCode",{parentName:"p"},"Journey"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "data": {\n        "currency": "EUR",\n        "trips": [\n            {\n                "price": {\n                    "amount": 590.97,\n                    "currency": "EUR"\n                },\n                "journeys": [\n                    {\n                        "flights": [\n                            {\n                                "airlineIata": "AF",\n                                "number": "65",\n                                "departureAirportIata": "LAX",\n                                "arrivalAirportIata": "CDG",\n                                "departureDate": "2021-08-03T09:50:00Z",\n                                "arrivalDate": "2021-08-04T11:50:00Z"\n                            }\n                        ]\n                    }\n                ],\n                "travelers": [\n                    {\n                        "ageRange": "ADULT"\n                    }\n                ]\n            }\n        ]\n    }\n}\n')),(0,o.kt)("br",null),(0,o.kt)("h2",{id:"possible-quote-outputs"},"Possible Quote outputs"),(0,o.kt)("p",null,"Our Quote API will give you different responses:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"201"),": The Quote is valid and respects the expected format. Inside this response, you will find a reference that will be required for the ",(0,o.kt)("a",{parentName:"li",href:"./subscriptions"},"Subscriptions")," (",(0,o.kt)("strong",{parentName:"li"},"pay close attention to the quote validity"),"). Keep this reference warm \ud83d\udc4c \xbb"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"400"),": The Quote is invalid. You may have forgotten one mandatory field or made a mistake with one format"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"401"),": The Quote cannot be send because you are experimenting an issue with your token.")),(0,o.kt)("br",null),(0,o.kt)("p",null,"Only Quotes with a ",(0,o.kt)("inlineCode",{parentName:"p"},"201")," response and a valid body can be displayed in your purchase funnel."),(0,o.kt)("br",null),(0,o.kt)("h3",{id:"valid-payload-but-inability-to-sell-the-bundle"},"Valid payload but inability to sell the bundle"),(0,o.kt)("p",null,"Each product and, by extension, each bundle can come with a set of limitations of sales (",(0,o.kt)("em",{parentName:"p"},"Example: A product can sometimes be sold only up to a certain time before departure."),")."),(0,o.kt)("br",null),(0,o.kt)("p",null,"If you send a payload in the right format but that ends up in breach with one of the sales limitation, you will receive a valid ",(0,o.kt)("inlineCode",{parentName:"p"},"201")," response from the server. ",(0,o.kt)("strong",{parentName:"p"},"However, your ",(0,o.kt)("inlineCode",{parentName:"strong"},"Quote")," will have a ",(0,o.kt)("inlineCode",{parentName:"strong"},"false")," validity, meaning that we can not sell the bundle to the given trip.")),(0,o.kt)("p",null,"Invalid Quotes come with ",(0,o.kt)("inlineCode",{parentName:"p"},"reasons")," to help you understand why we cannot cover the given trip."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"You must only display valid Quotes in your purchase funnel."))),(0,o.kt)("br",null),(0,o.kt)("p",null,"Example: If you are selling 2 products, you may receive the following response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": [\n    {\n      "quotes": [\n        {\n          "valid": true,\n          "bundle": "silver",\n          "price": {\n            "amount": 590.97,\n            "currency": "EUR"\n          },\n          "reference": "<QUOTE_REFERENCE>",\n          "date": "2021-06-03T14:49:07.790+02:00",\n          "expirationDate": "2021-06-04T14:49:07.790+02:00"\n        },\n        {\n          "valid": false,\n          "bundle": "gold",\n          "reasons": [\n            "One of the flights is too close in the future (cannot cover flights departing before \'2021-08-02T12:50:00Z+03:00\' and journeys.0.flights.0.departure_date is \'2021-08-03T12:50:00.000+03:00\')"\n          ],\n          "date": "2021-06-03T14:49:07.790+02:00"\n        }\n      ]\n    }\n  ]\n}\n')),(0,o.kt)("br",null),(0,o.kt)("p",null,"Here, you will be able to sell the ",(0,o.kt)("inlineCode",{parentName:"p"},"silver")," bundle but not the ",(0,o.kt)("inlineCode",{parentName:"p"},"gold")," one."),(0,o.kt)("br",null))}c.isMDXComponent=!0}}]);