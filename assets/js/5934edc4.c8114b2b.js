"use strict";(self.webpackChunkfront_documentation=self.webpackChunkfront_documentation||[]).push([[268],{9530:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var r=n(2735);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,u=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=l(n),d=a,b=m["".concat(u,".").concat(d)]||m[d]||c[d]||o;return n?r.createElement(b,i(i({ref:t},p),{},{components:n})):r.createElement(b,i({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1568:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return u},default:function(){return d},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return c}});var r=n(6033),a=n(7839),o=(n(2735),n(9530)),i=["components"],s={sidebar_position:2},u="Create a contract",l={unversionedId:"guides/subscriptions",id:"guides/subscriptions",title:"Create a contract",description:"What is a Subscription?",source:"@site/resources/partner-api/guides/subscriptions.md",sourceDirName:"guides",slug:"/guides/subscriptions",permalink:"/partner-api/guides/subscriptions",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"sidebar",previous:{title:"Get a price from the API",permalink:"/partner-api/guides/quotes"},next:{title:"Retrieve products' Terms & Conditions",permalink:"/partner-api/guides/retrieve-t&c"}},p={},c=[{value:"What is a Subscription?",id:"what-is-a-subscription",level:2},{value:"Example of Subscription input",id:"example-of-subscription-input",level:2},{value:"Possible Subscription outputs",id:"possible-subscription-outputs",level:2},{value:"More details about <code>409</code> error messsages",id:"more-details-about-409-error-messsages",level:3},{value:"Example of Successful Subscription",id:"example-of-successful-subscription",level:3}],m={toc:c};function d(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"create-a-contract"},"Create a contract"),(0,o.kt)("h2",{id:"what-is-a-subscription"},"What is a Subscription?"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Subscription")," is the endpoint that you will use to create a contract for a booking. Travelers will benefit from Koala protection only once the contract is created."),(0,o.kt)("p",null,"You will use the ",(0,o.kt)("inlineCode",{parentName:"p"},"Subscription")," endpoint every time the travelers have added a Koala\nproduct to their basket and completed the payment on your website."),(0,o.kt)("p",null,"To post a ",(0,o.kt)("inlineCode",{parentName:"p"},"Subscription"),", you should first make a call to our ",(0,o.kt)("a",{parentName:"p",href:"./quotes"},"Quote")," API to obtain the precious ",(0,o.kt)("inlineCode",{parentName:"p"},"<QUOTE_REFERENCE>"),"."),(0,o.kt)("p",null,"In total, you will need to provide:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The Quote reference"),(0,o.kt)("li",{parentName:"ul"},"The booking number (a unique reference number from your information system, usually the one you shared with your\ncustomers)"),(0,o.kt)("li",{parentName:"ul"},"The client details"),(0,o.kt)("li",{parentName:"ul"},"The travelers details")),(0,o.kt)("h2",{id:"example-of-subscription-input"},"Example of Subscription input"),(0,o.kt)("p",null,"This is an example of the payload you need to send us:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "bookingNumber": "5K7SXD",\n    "quotes": [\n      {\n        "reference": "<QUOTE_REFERENCE>",\n        "travelers": [\n          {\n            "ageRange": "ADULT",\n            "birthdate": "1968-06-09",\n            "firstName": "Marty",\n            "lastName": "McFly"\n          },\n          {\n            "ageRange": "ADULT",\n            "birthdate": "1968-01-21",\n            "firstName": "Jennifer",\n            "lastName": "Parker"\n          }\n        ]\n      }\n    ],\n    "client": {\n      "email": "marty.mcfly@gmail.com",\n      "firstname": "Marty",\n      "lastname": "McFly"\n    }\n  }\n}\n')),(0,o.kt)("br",null),(0,o.kt)("h2",{id:"possible-subscription-outputs"},"Possible Subscription outputs"),(0,o.kt)("p",null,"Our Subscriptions API will give you different responses:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"201"),": The Subscription is valid and the contract is successfully created. The travelers are now covered by Koala \ud83d\udc28"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"400"),": The Subscription is invalid. You may have forgotten one mandatory field or made a mistake with one format."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"401"),": The Subscription cannot be created because you are experimenting an issue with your token."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"409"),": The Subscription cannot be created because the booking number or the quote reference you used has already been\nsent to us.")),(0,o.kt)("br",null),(0,o.kt)("h3",{id:"more-details-about-409-error-messsages"},"More details about ",(0,o.kt)("inlineCode",{parentName:"h3"},"409")," error messsages"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"A booking number and the quote reference can only be used once with our Subscriptions service.")),(0,o.kt)("p",null,"If you are experiencing this issue but do not know why, please send us an email at ",(0,o.kt)("a",{parentName:"p",href:"mailto:support@hikoala.co"},"support@hikoala.co")),(0,o.kt)("br",null),(0,o.kt)("h3",{id:"example-of-successful-subscription"},"Example of Successful Subscription"),(0,o.kt)("p",null,"If the payload is valid you will receive a ",(0,o.kt)("inlineCode",{parentName:"p"},"201")," response."),(0,o.kt)("p",null,"Here is an example of successful response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "bookingNumber": "5K7SXD",\n    "price": {\n      "amount": 59.97,\n      "currency": "EUR"\n    }\n  }\n}\n')),(0,o.kt)("p",null,"The travelers for that booking are now covered by Koala and can travel with peace of mind \ud83d\udc28"),(0,o.kt)("br",null))}d.isMDXComponent=!0}}]);